<div nzRow class="btn-group">
  <button nz-button nzTrigger="click" nzType="primary" (click)="showModal()">
    New Group
  </button>
</div>

<nz-modal
  [nzFooter]="null"
  nzTitle="Add Group"
  [(nzVisible)]="display"
  (nzOnCancel)="closeModal()"
>
  <!-- Step Panel -->
  <nz-steps [nzCurrent]="currentStep">
    <nz-step nzTitle="Add Group Name"></nz-step>
    <nz-step nzTitle="Add Permissions"></nz-step>
  </nz-steps>

  <div class="steps-content">
    <!-- Form Data -->
    <form nz-form [formGroup]="formData" (ngSubmit)="submitForm()">
      <nz-form-item *ngIf="currentStep == 0">
        <nz-form-control>
          <input
            formControlName="group"
            nz-input
            type="text"
            placeholder="Group Name"
            autocomplete="Group Name"
          />
          <nz-form-explain
            *ngIf="
              formData.get('group')?.dirty &&
              formData.get('group')?.errors
            ">
            Group already exists
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-checkbox-wrapper
        *ngIf="currentStep == 1"
        (nzOnChange)="outputPermissions($event)"
      >
        <div nz-row class="data-row">
          <div nz-col nzSpan="24" *ngFor="let permission of permissions">
            <label nz-checkbox [nzValue]="permission">{{permission}}</label>
          </div>
        </div>
      </nz-checkbox-wrapper>
    </form>

    <div nz-row class="data-row" *ngIf="currentStep == 2">
      <div><b>Group Name:</b> {{ data?.name }}</div>
      <div *ngFor="let item of data?.permissions" nz-col nzSpan="24">
        {{ item }}
      </div>
    </div>
    <!-- End Form Data-->
  </div>
  <div class="steps-action">
    <button nz-button nzType="default" (click)="pre()" *ngIf="currentStep > 0">
      <span>Previous</span>
    </button>
    <button nz-button nzType="default" (click)="next()" *ngIf="currentStep < 2">
      <span>Next</span>
    </button>
    <button
      [disabled]="!formData.valid"
      nz-button
      nzType="primary"
      (click)="submitForm()"
      *ngIf="currentStep === 2"
    >
      <span>Done</span>
    </button>
  </div>
  <!-- End Step Panel -->
</nz-modal>
